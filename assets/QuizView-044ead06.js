import{b as M,a as F,_ as E,u as Y,F as D}from"./vee-validate-4e266e86.js";import{o as l,c as u,a,F as x,d as Q,n as w,k as V,t as b,i as p,j as y,B as O,e as P,C as T,g as B,b as h,w as k,h as q,I as $,_ as C,r as v,D as N,E as A,G as U}from"./index-d3e83a28.js";import{h as R}from"./carsList-30c7b749.js";import{C as W}from"./CarCard-e30737c5.js";import"./4-4e259c50.js";const _=[{id:"budget",name:"budget",title:"What's your budget?",subtitle:"Find vehicle options that fit your budget.",values:[{label:"Under $250/Month",value:"Under $250/Month"},{label:"$250-374/Month",value:"$250-374/Month"},{label:"$374-500/Month",value:"$374-500/Month"},{label:"Over $500/Month",value:"Over $500/Month"}],next:"employment_status",type:"radio"},{id:"employment_status",name:"employment_status",title:"What's your employment status?",subtitle:"Your employment status will help determine the best vehicle and financing options for you.",values:[{label:"Employed",value:"Employed",next:"monthly_income_1"},{label:"Self-Employed",value:"Self-Employed",next:"monthly_income_1"},{label:"Student",value:"Student",next:"is_working"},{label:"Retired / Pension",value:"Retired / Pension",next:"monthly_income_2"},{label:"Other",value:"Other",next:"how_earn"}],next:"",type:"radio"},{id:"monthly_income_1",name:"monthly_income",title:"Enter your monthly income",subtitle:"Your income details help us make sure your vehicle payments are easy and affordable. Before taxes and deductions.",values:[{name:"monthly_income",placeholder:"Monthly income",type:"number",rules:{required:!0,numeric:!0}}],next:"employment",type:"input"},{id:"monthly_income_2",name:"monthly_income",title:"Enter your monthly income",subtitle:"Your income details help us make sure your vehicle payments are easy and affordable. Before taxes and deductions.",values:[{name:"monthly_income",placeholder:"Monthly income",type:"number",rules:{required:!0,numeric:!0}}],next:"is_working_2",type:"input"},{id:"monthly_income_3",name:"monthly_income",title:"Enter your monthly income",subtitle:"Your income details help us make sure your vehicle payments are easy and affordable. Before taxes and deductions.",values:[{name:"monthly_income",placeholder:"Monthly income",type:"number",rules:{required:!0,numeric:!0}}],next:"how_long_receiving",type:"input"},{id:"is_working",name:"is_working",title:"Are you currently working?",subtitle:"Your employment status will help determing the best vehicle and financing options for you.",values:[{label:"Yes",value:"Yes",next:"employment"},{label:"No",value:"No",next:"how_long_have_been"}],next:"",type:"radio"},{id:"is_working_2",name:"is_working",title:"Are you currently working?",subtitle:"Your employment status will help determing the best vehicle and financing options for you.",values:[{label:"Yes",value:"Yes",next:"employment"},{label:"No",value:"No",next:"how_long_receiving"}],next:"",type:"radio"},{id:"how_earn",name:"how_earn",title:"How do you earn income?",subtitle:"Your employment status will help determine the best vehicle and financing options for you.",values:[{label:"Long-term disability",value:"Long-term disability"},{label:"Child support",value:"Child support"},{label:"Maternity leave",value:"Maternity leave"},{label:"Unemployed / EI",value:"Unemployed / EI"},{label:"Spousal support / Alimony",value:"Spousal support / Alimony"},{label:"Social assistance / Welfare",value:"Social assistance / Welfare"},{label:"Baby bonus / Child tax",value:"Baby bonus / Child tax"},{label:"Other / Not listed",value:"Other / Not listed"}],next:"monthly_income_3",type:"radio"},{id:"employment",name:"employment",title:"Tell us about your employment",subtitle:"We won’t come visit but we need these details to confirm your employment status so you can get the best rates possible.",values:[{name:"employer",placeholder:"Employer",type:"text",rules:{required:!0}},{name:"title",placeholder:"Title",type:"text",rules:{required:!0}}],next:"how_long_have_been",type:"input"},{id:"how_long_have_been",name:"how_long_have_been",title:"How long have you been earning this income?",subtitle:"Your income details help us make sure your vehicle payments are easy and affordable.",values:[{name:"long_years",placeholder:"Years",type:"number",rules:{required:!0,numeric:!0}},{name:"long_months",placeholder:"Months",type:"number",rules:{required:!0,numeric:!0}}],next:"how_long_receiving",type:"input"},{id:"how_long_receiving",name:"how_long_receiving",title:"How long receiving?",subtitle:"Your income details help us make sure your vehicle payments are easy and affordable.",values:[{name:"long_time",placeholder:"Time",type:"text",rules:{required:!0}}],next:"address",type:"input"},{id:"address",name:"address",title:"Where do you live?",subtitle:"Providing your location helps find the best deals near you.",values:[{name:"street_address",placeholder:"Street address",type:"text",rules:{required:!0}},{name:"city_address",placeholder:"City",type:"text",rules:{required:!0}},{name:"province_address",placeholder:"Province",type:"text",rules:{required:!0}},{name:"postal_code_address",placeholder:"Postal code",type:"number",rules:{required:!0,numeric:!0}}],next:"born_date",type:"input"},{id:"born_date",name:"born_date",title:"When were you born?",subtitle:"",values:[{name:"born_year",placeholder:"Year",type:"number",rules:{required:!0,digits:4}},{name:"born_month",placeholder:"Month",type:"number",rules:{required:!0,numeric:!0,min_value:1,max_value:12}},{name:"born_day",placeholder:"Day",type:"number",rules:{required:!0,numeric:!0,min_value:1,max_value:31}}],next:"user_info",type:"input"},{id:"user_info",name:"user_info",title:"Congratulations! Last step.",subtitle:"Get access to your vehicle and financing options by creating your account. There is no obligation to continue with financing if you change your mind. ",values:[{name:"first-name",placeholder:"First name",type:"text",rules:{required:!0}},{name:"last-name",placeholder:"Last name",type:"text",rules:{required:!0}},{name:"email",placeholder:"Email",type:"email",rules:{required:!0,email:!0}},{name:"phone",placeholder:"Phone number",type:"phone",rules:{required:!0,digits:10}}],next:"",type:"input",lastStep:!0}],L={class:"radio"},G={class:"radio__options"},j={class:"radio__options-btn"},H=["name","onChange"],J={key:0,class:"input__error"},K={__name:"RadioComponent",props:{options:{type:Array,required:!0},name:{type:String},modelValue:{},errors:{type:Array},rules:{}},emits:["update:modelValue"],setup(e){const i=e,{errorMessage:n,value:c}=M(()=>i.name,i.rules,{validateOnValueUpdate:!1});return(o,t)=>(l(),u("div",L,[a("ul",G,[(l(!0),u(x,null,Q(e.options,(s,m)=>(l(),u("li",{class:w(["radio__options-item",{"radio__options-item_active":e.modelValue===s.value}]),key:`radio-label-${m}`},[a("label",j,[V(b(s.label)+" ",1),a("input",{name:e.name,onChange:f=>o.$emit("update:modelValue",s.value),type:"radio",class:"radio__options-btn-input"},null,40,H)])],2))),128))]),p(n)?(l(),u("span",J,b(p(n)),1)):y("",!0)]))}},X={class:"quiz"},Z={class:"quiz__title subtitle-2"},ee={class:"quiz__subtitle text"},te={key:0,class:"quiz__form-wrapper"},ae={key:1,class:"quiz__form-wrapper"},ie=a("button",{type:"submit",class:"quiz__btn btn btn_solid quiz__btn-continue"},"Сontinue",-1),ne=a("span",null,"Back",-1),se={__name:"QuizForm",props:{quiz:{type:Object,required:!0},previousQuiz:{},activeValueData:{}},emits:["changeValue","goBack"],setup(e,{emit:i}){const n=e,c="radio",o="input",t=O(null);let s=P({});function m(){n.quiz.type===c?i("changeValue",t.value):n.quiz.type===o&&i("changeValue",s)}const f=Y();F();async function z(){(await f()).valid&&m()}return T(t,()=>{}),B(()=>{if(n.activeValueData)if(typeof n.activeValueData=="object"){let g=!1;for(let d in n.activeValueData)n.activeValueData[d]&&(g=!0);g&&(s=n.activeValueData)}else t.value=n.activeValueData;else i("setEmptyValue",null)}),(g,d)=>(l(),u("div",X,[a("div",Z,b(e.quiz.title),1),a("div",ee,b(e.quiz.subtitle),1),h(p(D),{onSubmit:d[2]||(d[2]=r=>z())},{default:k(()=>[e.quiz.type===c?(l(),u("div",te,[h(K,{name:e.quiz.name,options:e.quiz.values,"model-value":t.value,"onUpdate:modelValue":d[0]||(d[0]=r=>t.value=r),rules:{required:!0}},null,8,["name","options","model-value"])])):y("",!0),e.quiz.type===o?(l(),u("div",ae,[(l(!0),u(x,null,Q(e.quiz.values,(r,I)=>(l(),q(E,{name:r.name,placeholder:r.placeholder,"model-value":p(s)[r.name],"onUpdate:modelValue":S=>p(s)[r.name]=S,rules:r.rules,type:r.type,autocomplete:"off",validateOnValueUpdate:!1,key:`input-quiz-${I}`,class:"quiz__input"},null,8,["name","placeholder","model-value","onUpdate:modelValue","rules","type"]))),128))])):y("",!0),a("div",{class:w(["quiz__btns-wrap",{"quiz__btns-wrap_one":!e.previousQuiz}])},[ie,e.previousQuiz?(l(),u("button",{key:0,onClick:d[1]||(d[1]=r=>i("goBack")),class:"quiz__btn quiz__btn-back"},[h($,{src:"arrow-back",class:"quiz__arrow-back-icon"}),ne])):y("",!0)],2)]),_:1})]))}},oe={name:"QuizSuccess",components:{Icon:$},computed:{confirmationCode(){return`${Math.floor(Math.random()*1e7)}-${Math.random().toString(36).slice(2,7)}${Math.floor(Math.random()*10)}`}}},le={class:"quiz__success"},ue={class:"quiz__success-icon-wrap"},re=a("h2",{class:"quiz__success-title subtitle-2"},"Application successful!",-1),ce=a("div",{class:"quiz__success-subtitle text"},"Your response was successfully submitted. Thank you! Our team will reach out to you shortly.",-1),de={class:"quiz__success-confirmation"},me=a("div",{class:"quiz__success-confirmation-title"},"Confirmation number:",-1),he={class:"quiz__success-confirmation-number"};function _e(e,i,n,c,o,t){const s=v("Icon"),m=v("router-link");return l(),u("div",le,[a("div",ue,[h(s,{src:"success-tick",class:"quiz__success-icon"})]),re,ce,a("div",de,[me,a("div",he,b(t.confirmationCode),1)]),h(m,{to:{name:"home"},class:"quiz__success-link btn btn_solid"},{default:k(()=>[V("Go to main page")]),_:1})])}const pe=C(oe,[["render",_e]]),ye={name:"QuizView",components:{CarCard:W,QuizSuccess:pe,QuizForm:se},data(){return{activeQuiz:null,historyQuiz:[],quizData:{},showSuccess:!1,totalQuestions:0}},computed:{...N(U,["headerRequestCarId"]),activeQuizItem(){return _.find(e=>e.id===this.activeQuiz)},previousQuiz(){const e=this.historyQuiz.indexOf(this.historyQuiz.find(i=>i===this.activeQuiz));return e!==-1?this.historyQuiz[e>0?e-1:null]:null},isLastQuiz(){return this.activeQuizItem.hasOwnProperty("lastStep")&&this.activeQuizItem.lastStep},progressFillPercent(){return this.historyQuiz.length*100/this.totalQuestions},car(){if(this.$route.params.carId)return R.find(e=>e.id===+this.$route.params.carId)}},methods:{changeForm(e){this.changeValue(e),this.isLastQuiz?(this.showSuccess=!0,this.activeQuiz=null):(this.activeQuizItem.next?this.activeQuiz=this.activeQuizItem.next:this.activeQuiz=this.activeQuizItem.values.find(i=>i.value===this.quizData[this.activeQuizItem.id]).next,this.historyQuiz.push(this.activeQuiz))},changeValue(e){this.quizData[this.activeQuizItem.id]=e,this.changeTotal()},changeTotal(){let e=0,i=this.activeQuiz,n=_.find(o=>o.id===i);c(n);function c(o){if(o.next)e++,i=o.next,n=_.find(t=>t.id===i),c(n);else if(o.values.some(t=>t.hasOwnProperty("next"))){let t=o.values.find(s=>s.hasOwnProperty("next")&&s.next);t&&(e++,i=t.next,n=_.find(s=>s.id===i),c(n))}}this.totalQuestions=e+this.historyQuiz.length},goToPreviousForm(){this.previousQuiz&&(this.activeQuiz=this.previousQuiz,this.historyQuiz.pop())}},mounted(){this.activeQuiz=_[0].id,this.historyQuiz.push(this.activeQuiz)},unmounted(){this.headerRequestCarId=null}},ve={class:"quiz-section"},be={class:"container"},fe={class:"quiz__content"},ze={class:"quiz__card-car"},ge={key:0,class:"quiz__form-wrap"},qe={class:"quiz__progress"},we={class:"quiz__progress-content"},xe={key:1,class:"quiz__form-wrap quiz__form-wrap_success"};function Qe(e,i,n,c,o,t){var z;const s=v("CarCard"),m=v("QuizForm"),f=v("QuizSuccess");return l(),u("section",ve,[a("div",be,[a("div",fe,[a("div",{class:w(["quiz__content-wrap",{"quiz__content-wrap_car":t.car}])},[a("div",ze,[t.car?(l(),q(s,{key:0,car:t.car},null,8,["car"])):y("",!0)]),t.activeQuizItem&&!o.showSuccess?(l(),u("div",ge,[a("div",qe,[a("div",we,[a("div",{class:"quiz__progress-fill",style:A(`width: ${t.progressFillPercent}%;`)},null,4)])]),(l(),q(m,{quiz:t.activeQuizItem,previousQuiz:t.previousQuiz,activeValueData:o.quizData[o.activeQuiz],onChangeValue:t.changeForm,onGoBack:t.goToPreviousForm,onSetEmptyValue:t.changeValue,key:(z=t.activeQuizItem)==null?void 0:z.id},null,8,["quiz","previousQuiz","activeValueData","onChangeValue","onGoBack","onSetEmptyValue"]))])):(l(),u("div",xe,[h(f)]))],2)])])])}const Se=C(ye,[["render",Qe]]);export{Se as default};
